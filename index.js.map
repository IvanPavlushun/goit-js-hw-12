{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"48879708-f080042100b5dbafec10d9d0f\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function fetchImages(query, page = 1) {\n    try {\n        const params = new URLSearchParams({\n            key: API_KEY,\n            q: query,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            per_page: 20,\n            page,\n        });\n\n        const { data } = await axios.get(`${BASE_URL}?${params}`);\n\n        if (!data.hits.length) {\n            throw new Error(\"No images found for this query.\");\n        }\n\n        return data;\n    } catch (error) {\n        console.error(\"Error fetching images:\", error.message);\n        return { hits: [], totalHits: 0 };\n    }\n}","export function renderImages(images) {\n    return images\n        .map((image) =>\n            `<a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\"/>\n      <div class=\"info\">\n        <p class =\"info-item\">Likes <span class=\"info-amount\">${image.likes}</span></p>\n        <p class =\"info-item\">Views <span class=\"info-amount\">${image.views}</span></p>\n        <p class =\"info-item\">Comments <span class=\"info-amount\">${image.comments}</span></p>\n        <p class =\"info-item\">Downloads <span class=\"info-amount\">${image.downloads}</span></p>\n      </div>\n    </a>`\n        )\n        .join(\"\");\n}\n\n","import { fetchImages } from \"./js/pixabay-api\";\nimport { renderImages } from \"./js/render-functions\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\"#search-form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\nconst lightbox = new SimpleLightbox(\".gallery a\");\n\nlet page = 1;\nlet query = \"\";\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n\n    query = event.target.elements.searchQuery.value.trim();\n\n\n    if (!query) {\n        iziToast.warning({\n            title: \"Warning\",\n            message: \"Please enter a search term!\",\n            position: \"topRight\",\n        });\n        return;\n    }\n\n    page = 1;\n    loader.style.display = \"block\";\n    gallery.innerHTML = \"\";\n    loadMoreBtn.style.display = \"none\";\n\n    try {\n        const imagesData = await fetchImages(query, page);\n\n        loader.style.display = \"none\";\n\n        if (imagesData.hits.length === 0) {\n            iziToast.error({\n                title: \"Error\",\n                message: \"Sorry, there are no images matching your search query!\",\n                position: \"topRight\",\n            });\n            return;\n        }\n\n        gallery.innerHTML = renderImages(imagesData.hits);\n        lightbox.refresh();\n\n        if (imagesData.totalHits > 20) {\n            loadMoreBtn.style.display = \"block\";\n        }\n\n        scrollPage();\n    } catch (error) {\n        loader.style.display = \"none\";\n        iziToast.error({\n            title: \"Error\",\n            message: \"An error occurred while fetching images!\",\n            position: \"topRight\",\n        });\n    }\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n    page += 1;\n    loader.style.display = \"block\";\n    loadMoreBtn.disabled = true;\n\n    try {\n        const imagesData = await fetchImages(query, page);\n\n        loader.style.display = \"none\";\n        loadMoreBtn.disabled = false;\n\n        if (imagesData.hits.length === 0) {\n            iziToast.error({\n                title: \"Error\",\n                message: \"No more images available.\",\n                position: \"topRight\",\n            });\n            loadMoreBtn.style.display = \"none\";\n            return;\n        }\n\n        gallery.insertAdjacentHTML('beforeend', renderImages(imagesData.hits)); // Додаємо нові зображення\n        lightbox.refresh();\n\n        if (imagesData.hits.length < 20) {\n            loadMoreBtn.style.display = \"none\";\n            iziToast.info({\n                title: \"End of results\",\n                message: \"You've reached the end of the search results.\",\n                position: \"topRight\",\n            });\n        }\n\n        scrollPage();\n    } catch (error) {\n        loader.style.display = \"none\";\n        loadMoreBtn.disabled = false;\n        iziToast.error({\n            title: \"Error\",\n            message: \"An error occurred while fetching more images!\",\n            position: \"topRight\",\n        });\n    }\n});\n\nfunction scrollPage() {\n    const galleryItem = gallery.querySelector(\".gallery-item\");\n    if (galleryItem) {\n        const { height } = galleryItem.getBoundingClientRect();\n        window.scrollBy({\n            top: height * 3,\n            behavior: \"smooth\",\n        });\n    }\n}\n\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","params","data","axios","error","renderImages","images","image","form","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","event","iziToast","imagesData","scrollPage","galleryItem","height"],"mappings":"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"}